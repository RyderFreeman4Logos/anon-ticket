# ==========================================
# Shared Infrastructure
# ==========================================
# Path to the SQLite database (WAL mode enforced) or Postgres URL.
# Required.
DATABASE_URL="sqlite:///tmp/payments.db?mode=rwc"

# ==========================================
# Public API (User Facing)
# ==========================================
# TCP address to listen for public redemption/introspection requests.
# Default: 127.0.0.1:8080
API_BIND_ADDRESS="127.0.0.1:8080"

# Optional: Path to bind a Unix Domain Socket (overrides TCP if set).
# Ideal for Nginx/Tor reverse proxying.
# API_UNIX_SOCKET="/tmp/anon-ticket-api.sock"

# Tracing filter for the API service.
# Default: info
API_LOG_FILTER="info"

# ------------------------------------------
# DoS Protection (Bloom & Cache)
# ------------------------------------------
# TTL (seconds) for positive PID cache entries.
# Default: 60
API_PID_CACHE_TTL_SECS="60"

# Max number of entries in the in-memory cache.
# Default: 100000
API_PID_CACHE_CAPACITY="100000"

# Expected cardinality for the PID Bloom Filter.
# Set to 0 (and API_ALLOW_NO_BLOOM=1) to disable (not recommended).
# Default: 100000
API_PID_BLOOM_ENTRIES="100000"

# Desired false-positive rate for the Bloom Filter.
# Default: 0.01 (1%)
API_PID_BLOOM_FP_RATE="0.01"

# ==========================================
# Internal API (Admin & Metrics)
# ==========================================
# TCP address for privileged routes (revoke) and metrics.
# MUST NOT be exposed to the public internet.
# Default: 127.0.0.1:9090
API_INTERNAL_BIND_ADDRESS="127.0.0.1:9090"

# Optional: Internal Unix Socket (overrides TCP).
# API_INTERNAL_UNIX_SOCKET="/tmp/anon-ticket-internal.sock"

# Address to expose Prometheus metrics (via Internal API).
# Default: same as internal bind
# API_METRICS_ADDRESS=""

# ==========================================
# Blockchain Monitor
# ==========================================
# URL of the monero-wallet-rpc (preferably watch-only).
# Required.
MONERO_RPC_URL="http://127.0.0.1:18082/json_rpc"

# Block height to start scanning from (e.g., wallet creation height).
# Required.
MONITOR_START_HEIGHT="3000000"

# Polling interval in seconds.
# Default: 5
MONITOR_POLL_INTERVAL_SECS="5"

# Minimum confirmations required before a transfer is processed.
# Default: 10
MONITOR_MIN_CONFIRMATIONS="10"

# Minimum payment amount in atomic units (piconero) to ignore dust.
# Default: 10_000_000_000 (approx 0.01 XMR)
MONITOR_MIN_PAYMENT_AMOUNT="10000000000"

# Tracing filter for the monitor service.
# Default: info
MONITOR_LOG_FILTER="info"

# (Deprecated) MONITOR_METRICS_ADDRESS was removed; monitor metrics are exposed via the API internal listener.
